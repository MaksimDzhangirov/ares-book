# Меню Library

<div style="text-align:justify;">
<p>Существует две библиотеки символов (разделяемые с ISIS): SYSTEM.LIB; USERSYM.LIB и шесть библиотек корпусов: PACKAGE.LIB; CONNECTORS.LIB; SMTCHIP.LIB; SMTDISC.LIB; SMTBGA.LIB; USERPKG.LIB.</p>
<p>Кроме того, пользователь может создавать свои собственные библиотеки, используя команду <strong>Library Manager</strong>.</p>
<p>USERSYM.LIB и USERPKG.LIB доступны для чтения/записи, а остальные – только для чтения. Это гарантирует, что при обновлении библиотек с сайта не произойдет перезапись объектов, созданных пользователем, с одинаковыми именами, поэтому пользователь должны добавлять элементы только в USERSYM.LIB (новые символы) и USERPKG.LIB (новые корпуса).</p>
<p>Если нужно изменить элементы в библиотеках доступных только для чтения, пользователь сделать их доступными для чтения/записи, используя команду Свойства в проводнике Windows.</p>
<p><strong>Library Manager</strong> также позволяет изменять свойство чтения/записи библиотек.</p>
<p><strong>Pick Package/Symbol… (P)</strong> – открывает браузер библиотек объектов (Рис. 33), позволяя выбирать и размещать в ARES объекты из библиотек. Каждый корпус в библиотеках корпусов связан с категорией (<strong>Category</strong>), типом (<strong>Type</strong>), подкатегорией (<strong>Sub-Category</strong>) и кратким текстовым описанием (<strong>Description</strong>). Эта информация отображается в браузере библиотек и позволяет очень легко искать требуемые корпуса в библиотеках. При поиске по ключевым словам необходимо учитывать, что:</p>
<ol>
<li>поиск осуществляется среди названий корпусов, кратких тестовых описаний, категорий и подкатегорий;</li>
<li>если пользователь вводит несколько ключевых слов, то подразумевается, что все они входят в искомый объект. То есть, между ключевыми словами стоит логический элемент «И»;</li>
<li>если ключевое слово – число, то поиск производится по разрядам числа, стоящим в любом месте искомого объекта. Например, ключевому слову «7400» будут соответствовать объекты «74LS00», «74HC00» и т. д.;</li>
<li>если ключевое слово полностью соответствует объекту, то этот объект автоматически выделяется в результатах. Это позволяет быстрее выбирать объекты, названия которых известны;</li>
<li>если ключевое слово содержит символы подстановки «*» или «?», то они учитываются при поиске;</li>
<li>при установленном флажке <strong>Match Whole Words?</strong> поиск проводится так, чтобы ключевое слово полностью совпадало со значением свойства объекта. В противном случае допустимо частичное совпадение;</li>
<li>регистр символов не учитывается.</li>
</ol>
<p>В средней части диалогового окна отображаются результаты поиска <strong>Results</strong>, при этом сортировка производится по названию корпуса компонента (<strong>Device</strong>), библиотеке (<strong>Library</strong>), в которой он находится, и краткому текстовому описанию (<strong>Description</strong>). Нажав правой кнопкой мыши на свободном поле, можно также выбрать дополнительные столбцы для отображения: категория (<strong>Category</strong>), тип (<strong>Type</strong>), подкатегория (<strong>Sub-Cateroty</strong>), производитель (<strong>Manufacturer</strong>), коду хранения на складе (<strong>Stock Code</strong>). Щелкнув на название конкретного столбца можно изменить порядок сортировки.</p>
<p>Для подтверждения выбора корпуса нажмите левой кнопкой мыши по строке с его названием. Нажмите кнопку OK и поместите корпус на схему, нажав два раза левую кнопку. В верхней правой части экрана в окне <strong>Package Preview</strong> можно увидеть выбираемый компонент. После поиска всех нужных компонентов, браузер библиотек можно закрыть щелчком по крестику вверху справа или по кнопке Cancel внизу справа. Все выбранные компоненты должны оказаться в селекторе объектов.</p>
<p>Существующие пользовательские библиотеки из версий Proteus до 6.6 не содержат информации о категориях и подкатегориях. Корпуса из этих библиотек попадают в категорию Unspecified, а библиотечные названия используются в качестве подкатегорий.</p>
<p>Если пользователь выбрал корпус или символ, который уже находится на печатной плате, ARES обновит его из библиотек, хранящихся на диске. Учтите также, что:</p>
<ul>
<li>При выборе корпусов, необходимо учитывать, что ARES просто расположит новый корпус поверх точки привязки старого. Это означает, что контактные площадки нового корпуса могут иметь другие размеры и потребуется провести повторную разводку дорожек на плате.</li>
<li>Когда существует два или более корпуса или символа с одинаковыми именами в нескольких библиотеках, команда <strong>Pick Package/Symbol</strong> загрузит самый новый. Это удобно при редактировании одного из стандартных библиотечных элементов и размещении его в USERPKG.LIB, поскольку эта версия элемента будет считаться новее стандартной.</li>
</ul>
<center><img src="/images/chapter5/pickpackages.png" /></center>
<center>Рис. 33</center>
<p><strong>Make Package…</strong> – команда создания корпуса в ARES. Корпус – это совокупность контактных площадок и шелкографии, которая используется при размещении компонента на печатной плате. В ARES существует несколько библиотек со стандартными корпусами, что позволяет сэкономить время, по сравнению с ручными методами разводки печатной платы. Однако бывают случаи, когда необходимо создать свой собственный корпус, поэтому ниже приводится пошаговый алгоритм создания.</p>
<center><strong><em>Создание корпуса</em><strong></center>
<p>Чтобы создать новый библиотечный корпус необходимо:</p>
<ol>
<li>Выбрать соответствующую иконку формы контактных площадок (<strong>Round Through-hole Pad Mode</strong>, <strong>Square Through-hole Pad Mode</strong>,<strong> DIL Pad Mode</strong>, <strong>Edge Connector Pad Mode</strong>, <strong>Circular SMT Pad Mode</strong>, <strong>Rectangular SMT Pad Mode</strong>, <strong>Polygonal SMT Pad Mode</strong>) на левой панели инструментов и поместить площадки в свободную область основного окна редактирования. Используйте селектор слоев, чтобы разместить контактные площадки на соответствующих слоях;</li>
<li>По умолчанию ARES нумерует выводы, начиная с «1» по возрастанию в том порядке, в котором они помещаются на плату. Если нужно пронумеровать выводы в другом порядке, их необходимо пронумеровать заново, используя <strong>Auto Name Generator…</strong> или отредактировать вручную, нажав на нем правой кнопкой мыши и выбрав команду <strong>Edit Properties</strong> контекстного меню;</li>
<li>Выберите соответствующие иконки двумерной графики (<strong>2D Graphics Line Mode</strong>, <strong>2D Graphics Box Mode</strong>, <strong>2D Graphics Circle Mode</strong>, <strong>2D Graphics Arc Mode</strong>, <strong>2D Graphics Closed Path Mode</strong>) и поместите шелкографию корпуса на плате. Корпус может иметь текстовые обозначения (иконка <strong>2D Graphics Text Mode</strong>), как на стороне компонентов, так и на стороне пайки; причем они будут меняться местами, если выбрана иконка отражения по вертикали или горизонтали (<strong>X-Mirror</strong> или <strong>Y-Mirror</strong>).</li>
<li>Выделите все объекты, растягивая выделяющий прямоугольник над ними.</li>
<li>Вызовите команду <strong>Make Package…</strong> из меню <strong>Library</strong>. Появится диалоговое окно <strong>Make Package…</strong> приведенное на Рис. 34;</li>
<li>Во вкладке <strong>Indexing and Library Selection</strong> введите название в поле <strong>New Package Name</strong>, категорию в выпадающем списке <strong>Package Category</strong> или создайте новую с помощью кнопки <strong>New</strong>, тип в выпадающем списке <strong>Package Type</strong> или создайте новый с помощью кнопки <strong>New</strong>, подкатегорию в выпадающем списке <strong>Package Sub-Category</strong> или создайте новую с помощью кнопки <strong>New</strong>, краткое текстовое описание <strong>Package Description</strong> и затем выбрать библиотеку корпусов для его сохранения (доступны только библиотеки, в которые разрешена запись) – обычно это библиотека USERPKG.LIB. Установленный флажок <strong>Advanced Mode (Edit Manually)</strong> позволяет вводить данные в поля <strong>Package Category</strong>, <strong>Package Type</strong>, <strong>Package Sub-Category</strong> сразу вручную, а не из выбирать из выпадающего списка. После этого пользователь может переключиться во вкладку <strong>3D Visualisation</strong>, чтобы создать трехмерную модель корпуса или просто нажать кнопку OK, чтобы сохранить корпус в библиотеку без информации о его трехмерной модели;</li>
<li>Во вкладке <strong>3D Visualization</strong> введите трехмерную информацию, используя скриптовые команды, чтобы получить трехмерное изображение корпуса. Облегчает процесс создания окно трехмерного предварительного просмотра, которое в реальном времени обновляется при вводе или редактировании параметров. Смотри также раздел «Создание трехмерных моделей внутри ARES»;</li>
<li>Нажмите кнопку OK, чтобы сохранить корпус и трехмерную информацию о нем в указанную библиотеку.</li>
</ol>
<center><img src="images/chapter5/makepackage.png"></center>
<center>Рис. 34</center>
<p>Заметьте, что описание, которое вводится в диалоговом окне <strong>Make Package</strong>, будет использоваться браузером библиотек при поиске по ключевым словам, поэтому в общем случае при создании корпуса необходимо убедиться, что описание будет содержать ключевые слова, по которым пользователь сможет легко и просто найти корпус во время поиска. Учтите также, что:</p>
<blockquote style="margin-left:20px; color: #000;">Точка привязки корпуса может быть определена, поместив на него маркер <strong>ORIGIN</strong>. Если на корпусе нет маркера <strong>ORIGIN</strong>, то точкой привязки будет середина первого помещенного вывода. Маркеры доступны через иконку <strong>2D Graphics Marker Mode</strong> в левом меню инструментов.
<p>Также можно определить положения, отличающиеся от выбранных по умолчанию, где будут располагаться обозначение и/или номинал (название) корпуса. Для этого поместите маркеры <strong>REFERENCE</strong> или <strong>VALUE</strong> в требуемые положения.</p>
<p>Обычные стили контактных площадок могут быть расположены на отдельных медных слоях или на всех медных слоях в зависимости от текущей настройки селектора слоев:</p>
<ul>
<li>для обычных корпусов со сквозными отверстиями, пользователь должен располагать контактные площадки во всех слоях.</li>
<li>при создании корпусов для поверхностного монтажа пользователь должен располагать контактные площадки только в верхнем медном слоев. Если такой корпус размещается на стороне пайки, то контактные площадки автоматически перемещаются в нижний медный слой.</li>
<li>для двухсторонних площадок для краевых соединителей, пользователь должен располагать отдельные площадки в верхнем и нижнем медном слое.</li>
<li>если необходимо, чтобы контактная площадка имела различную форму на разных слоях для сквозного отверстия, пользователь должен использовать стеки контактных площадок.</li>
</ul></blockquote>
<p><strong>Make Symbol…</strong> – команда создания символа в ARES. Символ – это сгруппированные объекты двумерной графики, которые рассматриваются как один объект. Например, используя линии и текст можно создать условное графическое обозначение логического элемента И в виде символа.</p>
<center><img src="/images/chapter5/and.png" style="width: 320px;" /></center>
<p>Символ может быть создан, выделяя объекты, которые должны составлять его и вызывая команду <strong>Make Symbol</strong>. При этом информация о том, на каких слоях располагается двумерная графика, игнорируется. Появится диалоговое окно (Рис. 35), позволяющее ввести название символа в поле <strong>New Symbol Name</strong>, который может быть сохранен в библиотеке SYMBOL (системная библиотека символов) (или USERSYM – пользовательская) и станет доступен для непосредственного размещения из селектора объектов. Если до этого в библиотеке существовал символ с таким названием, он будет заменен новым.</p>
<center><img src="images/chapter5/makesymbol.png"></center>
<center>Рис. 35</center>
<p>ARES позволяет символу состоять из других символов и/или других графических объектов. Это позволяет, например, создавать логический элемент И-НЕ из ранее созданного логического элемента И и окружности.</p>
<p>Как и для корпусов, точка привязки символа может быть определена размещением маркера <strong>ORIGIN</strong>.</p>
<p>Символы ISIS и ARES по своей сути взаимозаменяемы и все библиотеки символов имеют тип «PROTEUS SYMBOL LIBRARY» (Библиотека символов PROTEUS). Однако ARES не поддерживает все графические возможности ISIS, поэтому не гарантируется правильное изображение символов ISIS со сложным рисунком. Смотри также раздел «Создание графических символов».</p>
<p><strong>Decompose</strong> – разбивает корпус на двумерную графику, контактные площадки и маркеры. Также отображает текстовый скрипт, который содержит название корпуса компонента, тип, цвет и все свойства компонента по умолчанию (Рис. 36). Аналогичным образом можно разбивать символы. Чтобы отредактировать существующий библиотечный корпус, необходимо:</p>
<ol>
<li>выбрать иконку <strong>Package Mode</strong>.</li>
<li>выбрать корпус, который нужно отредактировать из библиотеки (используя кнопку с буквой «P» вверху селектора объектов) и поместить его в рабочую область.</li>
<li>выделить корпус правой кнопкой мыши и затем вызвать команду <strong>Decompose</strong> из контекстного меню. Это разобьет корпус составляющие его контактные площадки и двумерную графику, а также поместит маркер <strong>ORIGIN</strong> в точке привязки корпуса.</li>
<li>Отредактировать контактные площадки и графику как необходимо.</li>
<li>После окончания редактирования использовать команду <strong>Make Package</strong>, чтобы повторно создать корпус с таким же именем или в виде нового корпуса.</li>
<li>Если выбранный корпус находится в библиотеке PACKAGE, которая обычно доступна только для чтения, вы должны сохранить его обратно в USERPKG. Этот способ лучше, чем поместить корпус обратно в библиотеку PACKAGE, поскольку в этом случае при его обновлении перепишутся корпуса, отредактированные пользователем. Заметьте, что выводы будут иметь номера, которые они имели в первоначальном корпусе, поэтому разбиение корпуса DIL14 добавление двух выводов по краям и затем повторное создание корпуса, не приведет к созданию корпуса DIL16, пока пользователь вручную не перенумерует все выводы.</li>
</ol>
<center><img src="images/chapter5/decompose.png"></center>
<center>Рис. 36</center>
<p><strong>Compile to Library</strong> – помещает размещенные на печатной плате корпуса в одну библиотеку корпусов. В открывшемся диалоговом окне можно выбрать в какую из библиотек, необходимо поместить корпуса (показаны только библиотеки доступные для чтения и записи), например, USERPKG. Учтите, что помещаемые корпуса не должны быть связаны линиями связи или дорожками для успешного выполнения этой команды.</p>
<p>Library Manager… – менеджер библиотек, позволяющий осуществлять управление пользовательскими и системными библиотеками и их содержимым в ARES (Рис. 37). Используя Library Maneger, пользователь может копировать, перемещать и удалять объекты из библиотек объектов. Library Maneger также позволяет создавать новые библиотеки и удалять существующие.</p>
<p>При первом открытии появится предупреждение ISIS о том, как размеры окна менеджера библиотек могут быть изменены и сохранены (Рис. 38). Окно менеджера не содержит привычных кнопок развернуть/свернуть в верхнем правом углу. Поэтому, для изменения размеров необходимо растягивать его мышью за края. Чтобы сохранить измененные размеры надо, щелкнув правой кнопкой мыши в верхней полосе окна (в той, где находится заголовок) выбрать опцию Save Window Size.</p>
<center><img src="images/chapter5/libmanager.png"></center>
<center>Рис. 37</center>
<center><img src="images/chapter5/message.png"></center>
<center>Рис. 38</center>
<p>В левом окне менеджера по умолчанию открывается первая по алфавиту библиотека CONNECTORS, а в правом библиотека USERPKG. Между двумя окнами расположены кнопки редактирования выбранных библиотек с большим черным треугольником-стрелкой показывающей направление проводимых операций. Дополнительно над окнами приведены обозначения Source (библиотека-источник) и Dest’n (библиотека-приемник). Обратите внимание, что оригинальная библиотека CONNECTORS обозначена как Read Only – доступная только для чтения. Кроме того, внизу соответствующих окон отображается информация о количестве компонентов в библиотеке и наличии свободного места в ней. Например, строка «213 Items (87 Free)» означает, что в библиотеке 213 корпусов и свободно место для создания ещё 87. Если выбрать элемент и кликнуть мышкой по элементу в левой или правой библиотеке, то в зависимости от того, где произошел щелчок мышкой – направление и соответственно Source/Dest’n меняются местами. Выбрать несколько элементов можно, зажав клавишу SHIFT или CTRL и нажимая левой кнопкой мыши на соответствующие элементы. Кнопки редактирования между панелями имеют следующее назначение:</p>
<ul>
<li>Order – определить порядок перечисления раскрывающегося списка библиотек при щелчке по выпадающему списку. По умолчанию принят алфавитный от 0 до 9 и от A до Z. Нажатие этой кнопки вызывает окно, позволяющее изменить порядок: перемещать одну выбранную библиотеку в списке, либо после нажатия All изменить порядок на обратный – Reverce или отсортировать по алфавиту – Sort.</li>
<li>Select All и Unselect All – позволяют соответственно выделить или снять выделение со всех элементов в окне выбранной библиотеки.</li>
<li>Copy Items, Move Items – соответственно копируют, перемещают выделенные элементы в направлении стрелки (из Source в Dest’n).</li>
<li>Delete Items – удаляет выделенные элементы. Необходимо быть осторожным при использовании этой команды, поскольку восстановить удаленный элемент невозможно.</li>
<li>Rename Item – переименовывает выделенный элемент.</li>
<li>Information – выводит информацию о выбранном элементе: Library (библиотека в которой он хранится), Version (версия библиотеки, в которой он был создан), Max. Objects (максимальное количество компонентов в библиотеке), Max. Prefixes (максимальное количество символов в обозначении корпуса на плате), Part (название компонента), Last Modified (дата и время последнего изменения компонента), Check Sum (контрольная сумма компонента в шестнадцатеричной системе), File Offset (смещение компонента в файле относительно начала в шестнадцатеричной системе), Category (категория, к которой относится компонент), Sub-category (категория, к которой относится компонент), Description (краткое описание компонента), Manufacturer (производитель).</li>
</ul>
<p>Рассмотрим кнопки управления библиотеками в нижней части:</p>
<ul>
<li>Dump Library – позволяет скопировать в буфер обмена или сохранить в текстовый файл информацию о выделенных элементах библиотеки. Если необходимо сохранить информацию обо всех элементах предварительно воспользуйтесь кнопкой Select All.</li>
<li>Delete Library – удаляет выбранную библиотеку полностью. Необходимо также осторожно использовать эту кнопку, однако, в данном случае перед удалением Proteus предупредит об удалении, после чего можно нажать кнопку No, чтобы отказаться от удаления.</li>
<li>ADI Library – предлагает добавить информацию в объекты библиотеки из файла .ADI. В данном файле можно задать необходимые свойства, которые будут присвоены объектам, если их свойства соответствуют определенным условиям, приведенным в файле. При нажатии кнопки открывается окно проводника, в котором необходимо выбрать требуемый .ADI файл.</li>
<li>Pack Library – создает для выбранной библиотеки резервную копию с разрешением .TMP. Команда доступна только для библиотек доступных для чтения и записи.</li>
<li>Backup Library – создает для выбранной библиотеки резервную копию с разрешением .BAK. Команда доступна для всех библиотек.</li>
<li>File Atribute – устанавливает или снимает при повторном применении атрибут Read Only (только для чтения) для выбранной библиотеки.</li>
<li>Create Library – позволяет создать собственную библиотеку. После нажатия на эту кнопку открывается каталог Library с предложением задать название новой библиотеки. Например, зададим произвольное название My_Lib. После нажатия сохранить Proteus предложит выбрать количество элементов в этой библиотеке – по умолчанию 100, но можно изменить его на любое другое. Затем будет создана новая библиотека. Изменить максимальное число элементов в библиотеке после создания библиотеки невозможно.</li>
</ul>
<p>Создав свою библиотеку с оригинальным именем, пользователь получает возможность сохранять вновь создаваемые элементы в ней или копировать/перемещать в нее элементы из USERPKG. Это позволяет передавать и переносить файлы библиотек на другой компьютер, гарантируя при этом, что файлы в библиотеке USERPKG не изменились на нем, поскольку у другого пользователя там могут храниться свои элементы. При создании библиотеки My_Lib в каталоге Library создаются два файла: My_Lib.LIB – непосредственно библиотека и индексный файл My_Lib.IDX. Именно они и подлежат переносу в соответствующий каталог другой копии Proteus.</p>
<p>Кнопка Help – вызывает встроенную в ARES помощь, связанную с Library Manager. Кнопка Close – закрывает менеджер библиотек.</p>
<p>Все, что изложено здесь для корпусов применимо и к библиотекам символов. Для того чтобы попасть в другие библиотеки, надо вызвать менеджер библиотек, находясь в режимах 2D Graphics Line Mode, 2D Graphics Box Mode, 2D Graphics Circle Mode, 2D Graphics Arc Mode, 2D Graphics Closed Path Mode, 2D Graphics Text Mode или 2D Graphic Symbol Mode, расположенных в левой панели инструментов.</p>
<p>New Pad Style… – открывает диалоговое окно (Рис. 39), позволяющее создавать новые стили контактных площадок.</p>
<center><img src="images/chapter5/padstyle.png"></center>
<center>Рис. 39</center>
<p>Контактные площадки в ARES имеют следующий вид:</p>
<center>&lt;PAD TYPE&gt; - &lt;DIAMETER/SIZE&gt; - &lt;HOLE&gt; или</center>
<center>&lt;Тип контактной площадки&gt; - &lt;Диаметр/Размер&gt; - &lt;Диаметр отверстия&gt;</center>
<p>Единицы измерения даны в дюймовой системе, если перед ними нет символа «M», например, C-40-15 – это круглая (С) контактная площадка диаметром 40 мил (1/1000 дюйма) и диаметром сквозного отверстия 15 мил (1/1000 дюйма), а С-200-М3 – это круглая (С) контактная площадка с диаметром 0,2 дюйма и диаметром сквозного отверстия 3 мм. Аналогично S-150-60 – это квадратная (S) контактная площадка со стороной квадрата 150 мил и диаметром сквозного отверстия 60 мил. Квадратные площадки для поверхностного монтажа задаются в виде «длинаХширина», например, 12Х70 – это квадратная площадка для поверхностного монтажа длиной 12 мил и шириной 70 мил.</p>
<p>В поле Name вводится название контактной площадки; рекомендуется использовать показанный выше шаблон для названия.</p>
<p>Ниже в разделах определяется тип контактной площадки – обычный (Normal) или для поверхностного монтажа (SMT). По форме контактные площадки могут быть Circular (круглые), Square (квадратные), DIL (прямоугольные со срезанными углами), EDGE (площадка для краевых соединителей (Рис. 40)), Polygonal (многоугольные). После выбора типа нажмите кнопку OK.</p>
<center><img src="images/chapter5/edge.png"></center>
<center>Рис. 40</center>
</div>

