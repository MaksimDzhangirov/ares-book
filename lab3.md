# Лабораторная работа №3

<div style="text-align:justify;">
	<h3 style="text-align:center;">Тема: Создание печатных плат в программе ARES</h3>
	<p><strong>Цель работы:</strong> изучить принцип создания печатных плат в программе ARES.</p>
	<center><strong>Теоретические сведения:</strong></center>
	<p>Опишем последовательность создания печатных плат на примере.</p>
	<p>Запустите ISIS и ISIS файл, находящийся в каталоге \SAMPLES\Tutorials\dsPIC33_REC.dsn. В меню <strong>Tools</strong> или в верхней панели инструментов выберите команду <strong>Netlist to ARES</strong> для передачи списка соединений данной принципиальной схемы в ARES. В случае успешной передачи списка откроется основное окно программы ARES, а в селекторе объектов будет расположен список компонентов, готовых к размещению на схеме. Если при загрузке списка соединений из ISIS в ARES будет обнаружено, что для какого-то компонента не выбран или определен корпус, то после загрузки в ARES откроется диалоговое окно, показанное на Рис. 149, через которое можно выбрать корпуса для всех элементов, которым корпус по какой-то причине не был назначен. В левой части диалогового окна расположены корпусы (<strong>Packages</strong>), доступные в библиотеках (<strong>Libraries</strong>) ARES. В правой части диалогового окна указан компонент (<strong>Component</strong>), для которого выбирается корпус. После выбора корпуса из списка (он автоматически появится в поле <strong>Package</strong>) или ввода его в поле <strong>Package</strong> вручную нажмите кнопку <strong>OK</strong>, чтобы выбрать корпус для элемента, кнопка <strong>Skip</strong> пропускает текущий проблемный компонент и позволяет продолжить загрузку списка соединений, кнопка <strong>Abort</strong> прекращает процесс выборе корпусов для компонентов. В последнем случае для выбора в селекторе объектов будут доступны только компоненты с назначенными корпусами. В общем случае при появлении данного диалогового окна лучше всего назначить корпуса компонентам в ISIS и только после этого переходить к созданию печатной платы в ARES, поскольку процесс назначения придется повторять каждый раз при использовании команды <strong>Netlist to ARES</strong>.</p>
	<center><img src="/images/lab3/packageselector.png" alt=""></center>
	<center>Рис. 149</center>
	<p>Поскольку проект в ARES был создан из принципиальной схемы в ISIS, т. е. со списком соединений, ARES уже имеет достаточно информации, которая необходима для упрощения процесса разводки. В частности, в списке соединений определено какие корпуса связаны с каждым компонентом на схеме и ARES, таким образом, может автоматически выбрать их, чтобы разместить на плате. При проектировании печатных плат в ARES необходимо понимать отличие между компонентом и корпусом.</p>
	<p>Компонент – это условное графическое изображение элемента, которое использовалось при создании схемы в ISIS, имеющее посадочное место.</p>
	<p>Корпус – это физическое посадочное место, которое существует в библиотеках ARES.</p>
	<p>Выбирая режим выбора компонентов (<strong>Component Mode</strong> в левой панели инструментов), разработчик получает доступ к посадочным местам, которые являются связанными с элементами в ISIS и имеют информацию о связях с другими компонентами, тогда как режим выбора корпуса (<strong>Package Mode</strong> в левой панели инструментов) приведет к выбору «несвязанного» физического экземпляра посадочного места. При работе с печатной платой, полученной из принципиальной схемы, работа происходит исключительно в режиме выбора компонентов.</p>
	<p>Щелкните левой кнопкой по иконке <strong>Component Mode</strong> в левой панели инструментов, чтобы отобразить список в селекторе объектов, соответствующий компонентам в ISIS, которые использовались для создания принципиальной схемы.</p>
	<p>Если список соединений не доступен, то пользователь может разместить на плате корпуса и соединить их, используя дорожки и переходные отверстия. Однако в этом случае усложняется процесс как проектирования печатной платы (не используются такие функции как авторазмещение и авторазводка компонентов), так и проверки правильность уже готовой разведенной платы (не доступна информация о связях между компонентами, извлекаемая из списка соединений).</p>
	<p>Перед размещением компонентов на плате необходимо определить форму и размер печатной платы. Для примера будем использовать простую прямоугольную плату, размером 115 мм длиной и 40 мм шириной.</p>
	<p>Для размещения границ печатной платы выберите иконку <strong>2D Graphics Box Mode</strong> в левой панели инструментов.</p>
	<p>Затем измените в селекторе слоев (<strong>Layer Selector</strong>) слой на <code style="background-color: rgb(255,255,0); ">Board Edge</code>.</p>
	<p>Переместите курсор мыши в точку примерной левой верхней границы платы. Удерживая мышь в этой точке, нажмите клавишу O на клавиатуре, чтобы установить локальное начало координат в точку под курсором мыши. При этом цвет координат изменится на розовый. Нажмите левую кнопку мыши и затем, растягивая мышь в одну из сторон, нарисуйте прямоугольник. Координаты внизу дисплея отобразят текущие границы платы.</p>
	<p>Нажмите кнопку M для переключения между метрическими и дюймовыми единицами если необходимо. Нажмите левую кнопку мыши ещё раз для подтверждения размещения.</p>
	<p>Чтобы восстановить глобальную систему координат опять нажмите клавишу O. Цвет координат изменится с розового на черный, что говорит о том, что теперь используются глобальные координаты.</p>
	<p>Если необходимо удалить или изменить размеры это можно сделать, вызвав контекстное меню, нажав правую кнопку мыши на границе платы, и выберите команду <strong>Delete</strong> или дважды щелкните правой кнопкой мыши на границе платы.</p>
	<p>ARES позволяет создавать печатные платы любой формы, используя инструменты для рисования двумерной графики. Так при использовании инструмента <strong>2D Graphics Closed Path Mode</strong>, зажав клавишу Ctrl можно рисовать дуги вместо прямых отрезков.</p>
	<p>Чаще всего, границы печатной платы будут занимать небольшую часть основного окна редактирования, что не всегда удобно, поскольку обычно основная работа происходит внутри них. Одним из решений этой проблемы является масштабирование этой области (с помощью среднего колесика мышки или используя клавишу F6), однако, при этом не удобно использовать масштаб по умолчанию, поскольку он применяется, чтобы отображать всю рабочую область (область внутри синего прямоугольного окна в основном окне редактирования).</p>
	<p>Другим решением может быть изменение размеров рабочей области. Чтобы изменить размеры рабочей области выделите границы печатной платы и все элементы на ней. Для этого выберите режим <strong>Selection Mode</strong> из левой панели инструментов, зажмите левую кнопку мыши и растяните область выделения в виде прямоугольника, пока она не станет больше границ печатной платы. Эту область можно отредактировать, используя зеленые маркеры с каждой из её сторон. Теперь поместите курсор мыши внутрь области выделения, повторно зажмите левую кнопку мыши и перетащите её в центр рабочей области.</p>
	<p>Отцентрировав границы печатной платы, рабочую область можно уменьшить до подходящего размера. Из меню <strong>System</strong>, выберите команду <strong>Set Work Area</strong> (Настроить размер рабочей области) и выберите размеры немного больше, чем границы печатной платы так, чтобы рабочая область ограничивалась границами печатной платы с небольшими допусками по длине и ширине (Рис. 150).</p>
	<center><img src="/images/lab3/setwork.png" alt=""></center>
	<center>Рис. 150</center>
	<p>При размещении границ печатной платы, было показано как можно определить локальное начало координат и использовать его для размещения элементов заданного размера (или размещения элементов на определенном расстоянии от этого начала координат). Также можем определить координаты глобального начала координат. Это начало координат используемое по умолчанию, когда локальное начало координат не определено, показанное небольшим синим маркером в виде круга с перекрестием.</p>
	<p>Переместим его в угол платы, например, в левый нижний угол. Это можно сделать следующим образом:</p>
	<ol>
		<li>из меню <strong>Output</strong> выберите команду <strong>Set Output Origin</strong>.</li>
		<li>переместите курсор мыши в левый нижний угол границы печатной платы. Увеличьте масштаб с помощью среднего колесика мыши для более точного размещения.</li>
		<li>нажмите левую кнопку мыши для подтверждения размещения.</li>
	</ol>
	<p>Теперь координаты будут отображаться относительно точку в нижнем левом углу печатной платы по умолчанию.</p>
	<p>При размещении начала координат можно использовать команду <strong>Goto-XY</strong> из меню <strong>View</strong> для перемещения курсора мыши в нужное положение на экране.</p>
	<p>ARES имеет сетку по умолчанию и привязывает объекты на сетке, что упрощает их соединения и управление разводкой платы. Существует четыре настройки привязки, управляемые также горячими клавишами, для метрических и дюймовых единиц, которые можно выбирать из меню <strong>View</strong>. Обычно настройки привязки выбирают таким образом, чтобы обеспечить оптимальную работу с печатной платой.</p>
	<p>Изменить четыре настройки привязки можно с помощью команды <strong>Set Grids</strong> (Настройка сетки) в меню <strong>System</strong>.</p>
	<p>Само отображение сетки можно выключать, изменять на отображение в виде точек или линий с помощью клавиши G или команды <strong>Grid</strong> меню <strong>View</strong>. Цвет сетки (<strong>Grid Lines</strong>) можно изменить в диалоговом окне <strong>Displayed Layers</strong> (команда <strong>Layers…</strong> из меню <strong>View</strong>).</p>
	<p>Разобравшись с основами, приступите к размещению компонентов на плате. На Рис. 151 показана плата с размещенными на ней элементами, которую можно использовать в качестве образца для аналогичного размещения элементов.</p>
	<center><img src="/images/lab3/pic1.png" alt=""></center>
	<center>Рис. 151</center>	
	<p>Размещение компонентов в ARES подобно аналогичной операции в ISIS.</p>
	<p>Для того чтобы поместить компонент выберите иконку <strong>Component Mode</strong> в левой панели инструментов и удостоверьтесь, что в селекторе слоев выбран слой <strong>Component Side</strong> (Сторона с компонентами).</p>
	<p>Сначала поместите держатель батарей AA в правой части платы. Выберите J1 из селектора объектов, поместите элемент, используя Рис. 151 в качестве образца, и затем щелкните левой кнопкой мыши для подтверждения. Заметьте, что как только произошло размещение элемента, он удаляется из селектора объектов и можно сразу же разместить следующий за ним элемент в селекторе объектов (в данном примере разъем J2 над правым верхним углом батареи).</p>
	<p>Выберите команду <strong>Layers…</strong> из меню <strong>View</strong>. В открывшемся диалоговом окне показаны все слои в ARES, их цвет и видимость. Для отключения слоя необходимо снять флажок напротив названия слоя. Отключите слой <strong>Force Vectors</strong> и закройте диалоговое окно.</p>
	<p>Необходимо помнить, что вызванное диалоговое окно управляет только видимостью; для управления такими свойствами компонента как выбор и редактирование необходимо использовать фильтр для выбора объектов.</p>
	<p>Для более точного размещения компонентов можно уменьшить размеры сетки через меню <strong>View</strong>, поскольку компоненты привязываются к узлам сетки.</p>
	<p>Задав необходимый размер сетки, щелкните правой кнопкой на элементе, чтобы выбрать его и затем перетащите его в требуемое положение. Можно поместить разъем J2 ближе к границе печатной платы, если переместить его название под ним. Для этого нужно щелкнуть правой кнопкой на самом названии, а не на элементе. Размещая аналогичным образом другие основные элементы схемы U1 (dsPIC33), U2 (I2C память), U3 (датчик температуры/влажности) и U4 (двойной операционный усилитель), в конце концов, получаем печатную плату подобную той, которая изображена на Рис. 152.</p>
	<center><img src="/images/lab3/pic2.png" alt=""></center>
	<center>Рис. 152</center>	
	<p>Заметьте, что посадочные места, используемые для компонентов U2, U3 и U4 повернуты соответствующим образом, чтобы уменьшить длину линий связи между элементами. Для вращения компонентов можно использовать клавиши «+» и «–» на цифровой клавиатуре, нажимая левую кнопку для подтверждения размещения.</p>
	<p>В общем случае существует два способа размещения элементов на плате. Пользователь может вручную разместить элементы или использовать команду <strong>Auto Placer…</strong> из меню <strong>Tools</strong>. После размещения всех элементов их можно переместить в требуемые положения.</p>
	<p>Разместим на плате крепежные (монтажные) отверстия. В качестве примера будем использовать контактную площадку диаметром 4,5 мм с диаметром сквозного отверстия 3 мм. Используя иконку <strong>Round Through-hole Pad Mode</strong> из левой панели инструментов, выберите в представленном списке необходимый диаметр монтажного отверстия в селекторе объектов.</p>
	<p>Требуемой контактной площадки диаметром 4,5 дюйма и диаметром отверстия 3 мм нет в представленном списке. Создайте контактную площадку следующим образом:</p>
	<ol>
		<li>Из меню <strong>Library</strong> выберите команду <strong>New Pad Style…</strong> или нажмите кнопку C вверху селектора объектов в режиме <strong>Round Through-hole Pad Mode</strong>.</li>
		<li>Введите название контактной площадки в поле <strong>Name</strong>; рекомендуется использовать принятый в ARES шаблон для названия (т. е., С-M4.5-М3).</li>
		<li>Определите тип контактной площадки <strong>Circular</strong> в разделе <strong>Normal</strong>.</li>
		<li>Укажите диаметр контактной площадки (<strong>Diameter</strong>) – 4.5mm. <strong>Drill Mark</strong> – это размер метки, обозначающий центр отверстия, задайте 30 мил (30 th). <strong>Drill hole</strong> (Диаметр высверливаемого отверстия) должен быть равен 3 мм, а для <strong>Guard gap</strong> введите значение 20 мил (20 th) (Рис. 153).
		<center><img src="/images/lab3/edit.png" alt=""></center>
		<center>Рис. 153</center>
		</li>
		<li>В нижней части диалогового окна <strong>Changes</strong> задайте: будет ли этот стиль контактной площадки использоваться для будущих проектов (режим <strong>Update Defaults</strong>) или только локально для текущего проекта (режим <strong>Local Edit</strong>).</li>
		<li>После нажатия на кнопку OK новый стиль контактной площадки станет доступен в селекторе объектов.</li>
	</ol>
	<p>При размещении монтажных отверстий иногда необходимо перемещать элементы. Это можно сделать с помощью режима <strong>Selection Mode</strong> из левой панели инструментов, выбирая компоненты по одному или выделяя группу.</p>
	<p>Пусть необходимо поместить отверстие на расстоянии 35 мм от нижнего края платы и на расстоянии 87,5 мм от левого края. Поскольку глобальное начало координат находится в левом нижнем углу платы, необходимо просто найти точку с координатами 87,5 по оси X и 35 мм – по оси Y. Воспользуйтесь командой <strong>Goto-XY</strong> из меню <strong>View</strong>, предварительно выбрав необходимую контактную площадку, и введите в поле <strong>X Coordinate</strong> – 87,5mm, а в поле <strong>Y Coordinate</strong> – 35mm. Щелкните левой кнопкой мыши, чтобы поместить её на плату.</p>
	<p>Для компонентов, положение которых критично на схеме, важно, чтобы они случайно не сдвигались после размещения на схеме. Пользователь может «привязать» любой объект к определенному местоположению, перемещая курсор мыши над объектом, пока он не станет выделен пунктиром, нажав правую кнопку мыши на объекте и выбрав <strong>Edit Properties</strong> из выпадающего контекстного меню. Поставив флажок напротив <strong>Lock Position</strong>, объект нельзя будет переместить или удалить. Поместите монтажные отверстия на плату так, как показано на Рис. 151. Отредактируйте их свойства, поставив флажок напротив <strong>Lock Position</strong>, чтобы их нельзя было случайно переместить или удалить.</p>
	<p>Плату с уже размещенными компонентами на ней можно загрузить из каталога \SAMPLES\Tutorials\dsPIC33_REC_UNROUTED.LYT.</p>
	<center><strong>Правила проектирования и классы цепей</strong></center>
	<p>После размещения корпусов на плате необходимо настроить правила проектирования, определяющие любые ограничения на проектирование или электрические требования, связанные с разводкой. Это можно сделать, вызвав команду <strong>Design Rule Manager…</strong> из меню <strong>Tools</strong> в ARES.</p>
	<center><strong>Правила проектирования</strong></center>
	<p>Первая вкладка этого диалогового окна позволяет сконфигурировать ограничения и минимальные зазоры между различными объектами на плате при разводке. В диалоговом окне отображается правило с названием (<strong>Rule Name</strong>) DEFAULT, которое применяется ко всем слоям и всем классам цепей, определяя набор зазоров между объектами.</p>
	<p>Это правило и зазоры создаются автоматически для каждого слоя, обеспечивая минимальный набор ограничений при проектировании печатной платы. Пользователь может изменить значения по умолчанию через команду <strong>Set Default Rules</strong> из меню <strong>System</strong>.</p>
	<p>При создании печатной платы в первую очередь необходимо определить – достаточно ли одного правила для всех слоев и всех дорожек на печатной плате. ARES позволяет создавать любое количество новых правил (смотри пояснения к команде <strong>Design Rule Manager</strong>) и можно ограничить их влияние определенным слоем и/или заданным набором соединений (классом цепей). Однако для рассматриваемого примера ограничимся конфигурацией существующего правила.</p>
	<p>Пусть по требованиям технического задания рассматриваемая печатная плата должна работать снаружи зданий, поэтому необходимо увеличить зазоры между контактными площадками и дорожками, чтобы улучшить изоляцию при конденсации влаги. 20% увеличения должно быть достаточно, поэтому измените зазоры <strong>Pad-Pad Clearance</strong> (зазор между контактными площадками), <strong>Pad-Trace Clearance</strong> (зазор между контактной площадкой и дорожкой) и Trace-Trace Clearance (зазор между дорожками) с 10 мил до 12 мил.</p>
	<p>Зазор между графическими объектами (<strong>Graphics Clearance</strong>) и между краями печатной платы и другими объектами (<strong>Edge/Slot clearances</strong>) имеют приемлемое значение по умолчанию, поэтому перейдите к вкладке <strong>Net Classes</strong> (Классы цепей).</p>
	<center><strong>Классы цепей</strong></center>
	<p>Эта вкладка позволяет настроить стили дорожек и переходных отверстий и определить каким образом осуществляется проведение дорожек при автоматическом создании дорожек на плате. Выпадающий список вверху вкладки позволяет переключаться между различными классами цепей и настраивать каждый по отдельности.</p>
	<p>Начнете с класса цепи POWER (Питание), который должен быть выбран по умолчанию. Любая цепь, которая содержит терминал питания или земли автоматически связывается с классом цепей POWER, если не происходит переназначения пользователем.</p>
	<p>Установите <strong>Track size</strong> равный 25th, не столько учитывая потребляемый ток, сколько полное сопротивление дорожки. В ARES этому размеру дорожки соответствует стиль дорожек T25. <strong>Neck style</strong> (Стиль переходов между дорожками) оставьте без изменений.</p>
	<p>Учитывая, что не задано никаких ограничений по току, выбор переходных отверстий – это компромисс между более высокой стоимостью производства меньших переходных отверстий и ухудшения качества разводки из-за больших переходных отверстий. Для рабочего тока этой цепи и стандартного текстолита толщиной 1,6 мм с медью толщиной 35 мкм, переходные отверстия со стандартным отверстием 0,4 мм являются хорошим компромиссом. Для дорожек питания приемлемым выбором будет 40 мил. Таким образом,  выберите стиль переходных отверстий V40.</p>
	<p>Если не известны характеристики конкретного стиля, их можно просмотреть, выбрав иконку соответствующего режима (переходное отверстие, дорожка, контактная площадка и т. д.), выделить интересующий стиль в селекторе объектов, и затем нажав кнопку E вверху селектора объектов.</p>
	<p>Настройки внизу диалогового окна позволяют изменить тип переходных отверстий (не имеет значения для двухсторонних плат) и также изменить цвет или видимость линий связи. Их можно использовать при ручной разводке дорожек, если необходимо различать сигнальные и питающие соединения. Флажок напротив <strong>Hidden?</strong> сделает невидимыми линии связи для цепей, которые связаны с данным классом.</p>
	<p>Назначение пар слоев для авторазводки (<strong>Layer Assignment for Autorouting</strong>) в правой части диалогового окна определяет для авторазводчика на каких слоях и как (преимущественно горизонтально (<strong>Hoz</strong>) или вертикально (<strong>Vert</strong>)) необходимо разводить класс цепи на многослойной плате. Для двухслойной платы дополнительная настройка этого раздела не требуется. Если необходимо развести однослойную плату, необходимо выбрать для всех классов цепей один и тот же слой для горизонтальных и вертикальных дорожек.</p>
	<p>После завершения настройки класса цепи POWER диалоговое окно будет иметь вид, показанный на Рис. 154.</p>
	<center><img src="/images/lab3/design.png" alt=""></center>
	<center>Рис. 154</center>	
	<p>Перейдите к следующему классу цепи в раскрывающемся списке; классу ANSW. Назначьте для этих соединений размер дорожки больше, чем для стандартного сигнала SIGNAL, но меньше, чем для класса цепи POWER, поэтому измените <strong>Trace Style</strong>, выбрав T15. Соответственно выберите <strong>Neck Style</strong> также равный T15 и меньшие переходные отверстия, выбрав <strong>Via Style</strong> равный V30 (Рис. 155).</p>
	<center><img src="/images/lab3/design1.png" alt=""></center>
	<center>Рис. 155</center>	
	<p>Создать стиль V30 можно, выбрав команду <strong>New Via Style…</strong> в меню <strong>Library</strong>.</p>
	<p>Наконец класс цепей SIGNAL (Сигнальные) включает все не питающие и соединения, для которых не указан класс цепи. Выберите толщину дорожек равную T8, <strong>Neck Style</strong> равный T8 и <strong>Via Style</strong> равный V30 для этих соединений (Рис. 156).</p>
	<p>Завершив настройку, нажмите кнопку OK, чтобы вернуться в основное окно редактирования.</p>
	<center><img src="/images/lab3/design2.png" alt=""></center>
	<center>Рис. 156</center>
	<center><strong>Запретные зоны</strong></center>
	<p>Также можно вводить ограничения по разводке, указывая области, на которых не могут располагаться дорожки. Примером может быть кварцевый генератор в левой нижней части платы, под которым не должны проходить дорожки. Чтобы сформировать запретную зону выберите иконку двумерной графики и измените текущий слой на <strong>Keepout</strong> (Запретная зона).</p>
	<p>Затем поместите небольшой прямоугольник вокруг шелкографии кварцевого генератора точно таким же, как это делалось для границы печатной платы (левый щелчок в точке начала размещения, перетащить по диагонали в конец области, левый щелчок для подтверждения размещения) (Рис. 157).</p>
	<center><img src="/images/lab3/pic3.png" alt=""></center>
	<center>Рис. 157</center>
	<p>Если провести прямоугольник не аккуратно, то могут появиться ошибки правил проектирования печатной платы.</p>
	<p>Нажмите левую кнопку мыши на окно программы проверки правил проектирования в правой нижней части экрана. После чего появится небольшое окно, в котором выдается информация об ошибках. Ошибки имеют вид PAD-EDGE (Ошибка размещения контактной площадки-края объекта), поскольку контактные площадки кварцевого генератора ближе к запретной зоне, чем 15 мил, которые определены в правилах проектирования печатной платы.</p>
	<p>Решить эту проблему можно двумя способами:</p>
	<ol>
		<li>Проигнорировать ошибки DRC. Запретная зона не будет влиять на связи между элементами.</li>
		<li>Переместить запретную зону на допустимое расстояние от контактных площадок. Простейший способ сделать это – уменьшить привязку сетки, щелкнуть правой кнопкой на запретной зоне и выбрать <strong>Drag Object</strong> (Переместить объект) из контекстного меню и затем вернуть обратно используемое значение привязки.</li>
	</ol>
	<p>После этого запретная зона будет иметь вид, представленный на Рис. 158.</p>
	<center><img src="/images/lab3/pic4.png" alt=""></center>
	<center>Рис. 158</center>
	<p>Подобная проблема существует для датчика температуры/влажности (U3). Нужно запретить проводить дорожки под датчиком, чтобы уменьшить ошибки измерений датчика, возникающие из-за нагрева дорожек под датчиком. Таким образом, необходимо гарантировать, что дорожки не будут размещены в области вокруг датчика:</p>
	<ol>
		<li>выберите иконку двумерной графики и затем изменить слой в селекторе слоев на Keepout.</li>
		<li>поместите прямоугольник вокруг нижней половины интегральной схемы, как показано на Рис. 159.</li>
	</ol>
	<center><img src="/images/lab3/pic5.png" alt=""></center>
	<center>Рис. 159</center>
	<p>В этот раз невозможно переместить запретную зону, чтобы исчезли DRC ошибки, поскольку положение зоны важно. Вместо этого можно вручную отменить возникшие ошибки, запустив диалоговое окно DRC, щелкнув правой кнопкой и выбрав Ignore this error (Игнорировать эту ошибку) из появившегося контекстного меню.</p>
	<center><strong>Разводка платы</strong></center>
	<p>Настроив ограничения печатной платы, перейдите к разводке печатной платы.</p>
	<center><strong>Разводка вручную</strong></center>
	<p>Рассмотрим ручную разводку некоторых дорожек на печатной плате. Обычно вручную нужно разводить те дорожки, которые должны иметь определенную траекторию или когда необходимо контролировать положение дорожки на плате. В качестве примера разведем дорожки от разъема J2 вручную.</p>
	<p>Выберите <strong>Track Mode</strong> (Режим разводки дорожек) в левой панели инструментов и измените слой в селекторе слоев на <code style="color:#FFF; background-color: rgb(204, 0,0); ">Top Copper</code>.</p>
	<p>Если посмотреть на контактную площадку 4 разъема J2, то видно, что она связана по кратчайшей линии связи с контактной площадкой GND. Проведем дорожку вниз и вдоль нижнего края платы.</p>
	<p>Для того чтобы начать прокладку дорожки нажмите левой кнопкой мыши на контактной площадке 4 и затем переместите мышь вниз.</p>
	<p>При этом кратчайшая допустимая траектория дорожки подсвечивается белым цветом, которая будет обновляться по мере движения мыши. Когда мышь приблизится к нижнему краю платы, щелкните левой кнопкой мыши и измените направление перемещения курсора, повернув налево. По мере дальнейшего движения влево линия связи будет изменяться, показывая, что можно закончить прокладывание дорожки на выводе 1 перемычки JP2.</p>
	<p>Как только курсор мыши находится под перемычкой, можно опять нажать левую кнопку, чтобы изменить направление движения и начать двигаться вверх к требуемой контактной площадке.</p>
	<p>Наконец, нажатие левой кнопки над контактной площадкой завершает прокладывание дорожки. При этом линия связи, соответствующая этому соединению, пропадает (Рис. 160).</p>
	<center><img src="/images/lab3/pic6.png" alt=""></center>
	<center>Рис. 160</center>	
	<p>Заметьте, что толщина дорожки при проведении не выбиралась, поскольку она была настроена ранее. ARES определяет, что прокладывается дорожка к цепи GND, для которой действуют правила для класса цепей POWER и выбирает заранее определенный стиль дорожки T25 с толщиной дорожки 25 мил.</p>
	<p>При ручной прокладке дорожек необходимо помнить, что:</p>
	<ul>
		<li>Можно использовать среднее колесико мыши, чтобы увеличить или уменьшить масштаб при размещении дорожек.</li>
		<li>Как было показано ранее, ARES использует привязку к сетке. При прокладке дорожек изменить привязку к сетке можно с помощью «горячих» клавиш (F4, F3, F2 и CTRL+F1).</li>
	</ul>
	<p>Если по каким-то причинам дорожка проведена неверно, ARES позволяет удалить всю дорожку или определенную её часть. Предположим, что нужно удалить последнюю часть дорожки, идущую вверх к контактной площадке 1 JP2.</p>
	<p>Для этого нажмите правой кнопкой под участком, который нужно удалить. При это подсветиться вся дорожка и команда <strong>Delete Route</strong> (Удалить дорожку) контекстного меню удалит всю дорожку с печатной платы. Однако, можно использовать команды в нижней части контекстного меню. Для этого конкретного случая, выберите команду <strong>Trim to Single Segment</strong> (Выделить текущий сегмент); при этом выделится та часть дорожки, на которой нажата правой кнопкой мыши.</p>
	<p>Затем опять нажмите правую кнопку мыши и выберите команду <strong>Delete Route</strong>; при этом удалится только выбранный участок дорожки.</p>
	<p>Затем увеличьте масштаб, уменьшите размер привязки, если необходимо, и проведите новый участок дорожки от существующей – до контактной площадки.</p>
	<p>Часто дорожки необходимо передвинуть или переместить после размещения без удаления и повторной прокладки. В качестве примера передвиньте дорожку немного вниз к краю платы.</p>
	<p>Для этого щелкните правой кнопкой мыши на горизонтальном участке дорожки (пусть необходимо передвинуть этот участок). Затем выберите команду <strong>Drag Route</strong> (Переместить дорожку) из контекстного меню, переместите курсор мыши вниз, чтобы сдвинуть дорожку в желаемое положение и щелкнем левой кнопкой мыши для подтверждения размещения.</p>
	<p>Используя команду <strong>Trim Manually</strong> из контекстного меню можно выделить любой требуемый участок и таким образом перемещать любые участки дорожки.</p>
	<center><strong>Пары слоев и ручная разводка</strong></center>
	<p>ARES определяет какие слои необходимо связывать с помощью переходных отверстий, используя раздел <strong>Layer Pairs</strong> в <strong>Design Rule Manager</strong>. Это означает, что каждый слой на плате имеет связанный с ним слой так, что известно какие слои связывает переходное отверстие во время разводки. Для двух слоев на плате, очевидно, что верхний медный слой будет связан с нижним медным слоем и наоборот, но для многослойных плат настройка пар слоев (меню <strong>System</strong> команда <strong>Set Layer Pairs</strong>) может быть важной.</p>
	<p>Продолжим разводку вручную с контактных площадок 1 и 2 разъема J2, которые являются линиями передачи канала USART микропроцессора dsPIC.</p>
	<p>Начните с контактной площадки 1 и проведите дорожку от контактной площадки на нижнем медном слое. Удостоверьтесь, что выбран режим <strong>Trace Mode</strong> и затем нажмите клавишу «Пробел». При этом происходит переключение между парами слоев, которые связаны между собой. Если последняя дорожка, которая была проведена, находилась на верхнем медном слое, то при нажатии на клавишу «Пробел» происходит переключение на нижний медный слой.</p>
	<p>Микропроцессор находится на определенном расстоянии от разъема, поэтому простейшей траекторией будет направленная вниз и вдоль нижнего края печатной платы. Начнем размещать дорожку, левым щелчком мыши на контактной площадке 1 разъема и затем двигая курсор мыши вниз.</p>
	<p>Когда курсор будет вблизи нижнего края платы, нажмите левую кнопку мыши и переместите курсор влево вдоль платы, пока не достигните правых контактных площадок посадочного места микропроцессора.</p>
	<p>Опять нажмите левую кнопку мыши и двигайтесь вверх, пока не будете на уровне нужной контактной площадки (при необходимости измените настройки привязки и/или масштаб). Теперь необходимо переключиться на верхний медный слой, чтобы создать соединение; это осуществляется двойным щелчком левой кнопки мыши. ARES разместит переходное отверстие (стиля, который выбран ранее), селектор слоев переключится на верхний медный слой и можно просто переместить курсор мыши, пока он не достигнет требуемой контактной площадки. Нажмите левую кнопку мыши, чтобы завершить разводку дорожки.</p>
	<p>Если вы поместили дорожку слишком близко к краю платы, то на панели задач в нижней части экрана появятся ошибки. Щелчок левой кнопкой мыши по панели задач выдаст информационное окно, а двойной щелчок по одной из ошибок покажет её на печатной плате.</p>
	<p>Эти ошибки будут связаны с тем, что расстояние между краем печатной платы и дорожкой меньше, чем были определены в <strong>Design Rule Manager</strong> ранее. Переместите дорожку вверх, после чего этого ошибка должна исчезнуть.</p>
	<p>Дорожка для контактной площадки 2 должна иметь почти такой же вид как для контактной площадки 1, поэтому опять начните размещать её на нижнем медном слое (проверьте слой в селекторе слоев; нажмите клавишу пробел для переключения между слоями). Разводку дорожек осуществляйте параллельно друг другу, чтобы избежать пересечения дорожек.</p>
	<center><strong>Основные возможности автоматической разводки</strong></center>
	<p>Для разводки остальных дорожек будет использовать автоматическую разводку. Как при ручной разводке авторазводчик будет подчиняться всем правилам проектирования, которые настроены ранее. Вызовите авторазводчик из меню <strong>Tools</strong> командой <strong>Auto Router…</strong> или из верхнего меню с помощью иконки с названием <strong>Auto-router</strong>.</p>
	<p>Открывшееся диалоговое окно имеет множество различных режимов управления автоматической разводкой, которые подробно описаны в разделе «Режимы работы авторазводчика». Для большинства плат легкой/средней сложности значений по умолчанию более чем достаточно. Запустите авторазводчик в полностью автоматическом режиме, который должен быть выбран по умолчанию, поэтому просто нажмите кнопку <strong>Begin Routing</strong>, чтобы осуществить разводку оставшихся дорожек.</p>
	<p>При этом операции, производимые в процессе разводки, будут показан на панели задач, пока он не завершиться. Как только разводка платы завершена необходимо помнить, что:</p>
	<ul>
		<li>Авторазводчик не изменяет дорожки, которые были разведены вручную – не разрывает и не перемещает их, работая с оставшимися соединениями.</li>
		<li>После завершения работы авторазводчика осуществляется замена прямых углов при проведении дорожек углами под 45°. Если этого делать не нужно, выберите в настройке Recorner Pass из выпадающего списка No в диалоговом окне перед запуском авторазводчика.</li>
	</ul>
	<p>В качестве примера работы с фильтром для выбора объектов, удалим все дорожки на верхнем медном слое платы, за исключением тех, которые были проведены вручную. Перейдите в режим выбора элементов (<strong>Selection Mode</strong>) и выделите всю плату.</p>
	<p>Затем в фильтре для выбора объектов снимете выбор с тех объектов, которые не нужно удалять, а именно со всего кроме дорожек и переходных отверстий. Выделенные объекты будут автоматически обновляться в реальном времени, позволяя наблюдать, что выбрано в данный момент.</p>
	<p>Теперь измените слой на <code style="color: #FFF; background-color: rgb(204, 0,0);">Top Copper</code> в селекторе объектов, а <strong>Layer Filter Mode</strong> в режим, чтобы фильтр для выбора объектов применялся только к текущему слою.</p>
	<p>Используя зеленые маркеры зоны выделения, сдвиньте её так, чтобы в неё не входил разъем J2.</p>
	<p>Наконец, используйте иконку в самой правой части фильтра для выбора объектов <strong>Track Selection Mode</strong> (Режим выбора дорожек), чтобы снять выбор с тех дорожек, которые находятся только частично в области выделения; в данном случае будет снят выбор с дорожки, которая была проведена вручную с контактной площадки 4, разъема J2.</p>
	<p>Теперь можно просто нажать клавишу <strong>Delete</strong> на клавиатуре или правой кнопкой мыши внутри выделения и выберите команду <strong>Block Delete</strong>, чтобы удалить все дорожки на верхнем медном слое.</p>
	<center><strong>Дополнительные настройки авторазводчика</strong></center>
	<p>Кратко рассмотрим дополнительные возможности авторазводчика:</p>
	<ul>
		<li>Возможность разводить дорожки только в определенной области платы или для определенного набора линий связи.</li>
		<li>Возможность управлять последовательностью разводки, т. е., определять какие команды выполнять и в каком порядке.</li>
	</ul>
	<p>Начните авторазводку, открыв диалоговое окно авторазводчика, и переключитесь в режим <strong>Enter router commands interactively</strong>, а затем нажмите кнопку <strong>Begin Routing</strong>.</p>
	<p>Откроется командное окно внизу основного окна редактирования, которое позволит управлять процессом разводки в последовательном диалоговом режиме. ARES имеет большой набор команд для управления разводкой, включая управление радиусом скругления дорожек, длиной и направлением дорожек выходящих из контактных площадок для поверхностного монтажа. Все команды приведены в разделе «Разводка в интерактивном режиме», поэтому только кратко рассмотрим некоторые основные практические примеры.</p>
	<p>При разводке платы в этом режиме необходимо помнить, что:</p>
	<ul>
		<li>Любые вводимые команды будут влиять на выделенный набор линий связи или на всю плату, если ничего не выделено. Это означает, что пользователь может управлять, выделяя определенные элементы, какие линии связи разводить.</li>
		<li>Любое изменение печатной платы (добавление новых корпусов компонентов) или переключение в другой режим из левой панели инструментов приведет к автоматическому выходу из режима интерактивной разводки.</li>
	</ul>
	<p>Прежде всего, удалите части дорожек на нижнем медном слое, оставшиеся после удаления дорожек верхнего медного слоя. Основной синтаксис большинства команд следующий:</p>
	<p>&lt;команда&gt; &lt;число проходов выполнений команды&gt;</p>
	<p>Введите в командную строку <code style="font-family: 'Courier New'">clean 2</code>, чтобы удалить лишние дорожки.</p>
	<p>Теперь предположим, что необходимо развести все соединения VCC. Выберите цепь VCC/VDD=POWER в селекторе объектов и нажнем на кнопку T над селектором объектов, чтобы выделить все соединения указанной цепи. Наконец введите «<code style="font-family: 'Courier New'">route 5</code>», чтобы развести эти соединения.</p>
	<p>Чтобы снять выделение с выделенных в данный момент объектов, нажмите левой кнопкой мыши в любой пустой области основного окна редактирования</p>
	<p>Подобным образом можно выделить соединения на плате и развести их независимо от остальной части платы. Например, выделите область в левой части платы и введите «<code style="font-family: 'Courier New'">route 10</code>», чтобы развести дорожки в этой области.</p>
	<p>При этом часть линий связей могут остаться, т. е., будут разведены не все дорожки. Эту проблему можно решить, используя команды <code style="font-family: 'Courier New'">clean</code>, <code style="font-family: 'Courier New'">filter</code> и <code style="font-family: 'Courier New'">route</code>, но для данного примера проще завершить разводку всей платы. Для этого щелкните левой кнопкой мыши на пустой области основного окна редактирования, чтобы снять выделение. Введите <code style="font-family: 'Courier New'">route 25</code>, а затем <code style="font-family: 'Courier New'">clean 2</code>, чтобы завершить разводку платы (Рис. 161).</p>
	<center><img src="/images/lab3/pic7.png" alt=""></center>
	<center>Рис. 161</center>
	<center><strong>Размещение области металлизации</strong></center>
	<p>После того как плата разведена, разместите на ней область металлизации. Чтобы начать размещение выберите команду <strong>Power plane generator…</strong> из меню <strong>Tools</strong>.</p>
	<p>В открывшемся диалоговом окне выберите цепь GND=POWER, оставив слой <code style="color: #FFF; background-color: rgb(0, 0, 204);">Bottom Copper</code> и установив стиль границы T10. Это стиль дорожки, с помощью которой рисуются внутренняя и внешняя границы области. Он также определяет наименьший участок меди, к которому может быть подсоединена область металлизации. Увеличение этого значения приведет к тому, что перестанут заполняться медью небольшие участки платы (например, между контактными площадками), а уменьшение значения к тому, что различные участки платы будут соединяться узкими участками меди.</p>
	<p>Оставьте значение <strong>Edge clearance</strong> принятым по умолчанию (Рис. 162).</p>
	<center><img src="/images/lab3/power.png" alt=""></center>
	<center>Рис. 162</center>
	<p>После выхода из диалогового окна должна появиться созданная область металлизации (Рис. 163).</p>
	<center><img src="/images/lab3/pic8.png" alt=""></center>
	<center>Рис. 163</center>
	<p>Существует несколько дополнительных настроек доступных теперь после размещения области. Редактирование площадки немного отличается от большинства других объектов в ARES в том смысле, что необходимо осуществлять щелчок правой кнопкой мыши на границе зоны (чтобы избегать нежелательных выделений других объектов).</p>
	<p>Проверьте в селекторе объектов, что разрешен выбор объектов типа «зона».</p>
	<p>Затем увеличьте масштаб и переместив курсор мыши к краю зоны, щелкните правой кнопкой мыши, когда она станет активной (выделится пунктиром). В контекстном меню выберите <code>Edit Properties</code> (Редактировать свойства).</p>
	<p>Основные интересующие нас свойства расположены в нижней части диалогового окна и поясняются  при описании команды <code>Zone Mode</code>.</p>
	<p>Для данной относительно простой платы, свойства, выбранные по умолчанию, являются идеальными.</p>
	<p>Пример разведенной платы можно загрузить из каталога \SAMPLES\Tutorials\dsPIC33_REC_COMPLETE.</p>
	<center><strong>Создание пазов</strong></center>
	<p>Чтобы завершить создание платы еще раз рассмотрим датчик температуры/влажности (U3). Чтобы осуществлять точные измерения, создадим теплоотвод вокруг этого корпуса, гарантирующий, что температура, которую измеряет датчик, будет реальной температурой окружающей среды, а не наводимой от печатной платы.</p>
	<p>Ранее вокруг этой части платы была помещена запретная зона, чтобы авторазводчик не размещал дорожки в этой зоне. Увеличьте масштаб вокруг датчика и удалите запретную зону. Необходимо переключиться в <strong>Selection Mode</strong> или изменить фильтр для выбора объектов, так, чтобы можно было выбирать двумерную графику.</p>
	<p>Также можно удалить и другую запретную зону вокруг кварцевого генератора.</p>
	<p>Возвращаясь к U3, теперь необходимо провести теплоотвод. Для этого необходимо поместить соответствующую графику на одном из механических слоев (MECH1…MECH4) и затем обозначить механический слой как слой для прорезки пазов при создании файла для производства платы.</p>
	<p>Выберите иконку <strong>2D Graphics Line Mode</strong> из левой панели инструментов, измените слой на MECH1 и затем разместите три линии так, чтобы сформировать теплоотвод в виде буквы «U» (Рис. 164).</p>
	<center><img src="/images/lab3/pic9.png" alt=""></center>
	<center>Рис. 164</center>
	<p>Измените толщину этих линий, если необходимо.</p>
	<p>После того как плата разведена и готова к производству сначала исследуйте её трехмерное изображение, чтобы посмотреть как она будет выглядеть в реальности и возможно внести последние изменения перед макетированием. Вызовите команду <strong>3D Visualization</strong> из меню <strong>Output</strong> в ARES.</p>
	<p>Рассмотрите плату с различных сторон. Увеличьте или уменьшите масштаб платы, чтобы рассмотреть интересующие области платы.</p>
	<p>Для исследования контактных площадок, переходных отверстий рассмотрите плату без элементов. Выберите команду <strong>Bareboard View</strong> из навигационной панели инструментов, чтобы удалить все физические компоненты с платы.</p>
	<p>Чтобы проверить допуски платы по высоте, включите ограничение по высоте через иконку на навигационной панели инструментов.</p>
	<p>Определить высоту платы можно через команду <strong>Dimensions</strong> (Размеры) в меню <strong>Settings</strong> (Настройки) просмотрщика.</p>
	<p>После создания платы её обычно необходимо вывести на бумагу или пленку. В операционной системе Windows, большинство устройств для выдачи твердой копии поддерживаются через обычные драйвера принтеров Windows. Кроме того, Labcenter поставляет свои собственные драйвера для перьевых графопостроителей, фотографопостроителей и сверлильных станков с ЧПУ.</p>
	<center><strong>Печать</strong></center>
	<p>Диалоговая форма команды <strong>Print…</strong> позволяет управлять множеством параметров, однако настроек по умолчанию в большинстве случаев быть достаточно, поэтому можно начать создание твердой копии, нажав кнопку OK.</p>
	<p>ARES запоминает настройки принтера из диалогового окна <strong>Printer Setup…</strong> и сохранит их независимо от настроек принтера для других приложений. Это позволяет настроить свойства принтера по умолчанию только для использования в приложении ARES.</p>
	<p>ARES позволяет создавать файл, используемый для производства печатных плат, в двух основных форматах:</p>
	<ul>
		<li>Традиционном Gerber/Excellon;</li>
		<li>Производственный формат ODB++.</li>
	</ul>
	<p>С точки зрения пользовательского интерфейса обе возможности похожи, но с точки зрения производства, формат ODB++ предоставляет намного больше информации, например: добавление информации о связях (список соединений) в выходной набор файлов; явную поддержку покрытых/не покрытых контактных площадок.</p>
	<p>Это означает, что при просмотре выходного набора файлов ODB++ процесс проверки проще и полнее. Тем не менее, традиционный выходной формат Gerber/Excellon является преобладающим при производстве и в большинстве случаев достаточно использовать его.</p>
	<p>Независимо от выбранного формата основная процедура создания одинакова. При вызове любой из команд (<strong>Gerber/Excellon Output…</strong> или <strong>ODB++ Output</strong> из меню <strong>Output</strong>), скорее всего ARES предложит запустить предварительную проверку. При этом запускается автоматическая проверка для тестирования некоторых стандартных ошибок проектирования, которая сообщает об успешном или неудачном завершении.</p>
	<p>Если предварительная проверка завершилась с ошибками, рекомендуется исправить их перед переходом к диалоговому окну создания файла, используемого для производства печатных плат. Предварительная проверка – это вспомогательная процедура для проектировщика для обеспечения качества, но она не является гарантией качества; рекомендуется проводить ручную проверку печатной платы, создавать и тестировать макет перед массовым производством.</p>
	<p>После успешного завершения предварительной проверки будет выдана диалоговая форма (Рис. 20).</p>
	<p>Программное обеспечение по умолчанию вносит в список слоев только те слои, которые используются при разводке, но всегда необходимо проверять его. Одна из наиболее часто встречающихся проблем при производстве возникает, когда производителю не предоставляется вся информация о плате.</p>
	<p>Настройка <strong>Slotting/Routing Layer</strong> явно определяет какой слой платы используется для определения контуров, использующихся для создания пазов. В данном примере использовался слой MECH1, поэтому необходимо указать его через выпадающее меню.</p>
	<p>Закладка <strong>Notes</strong> позволяет вставить любую важную информацию или особые требования для производителя. Её можно использовать для определения слоя для прорезки пазов, поскольку не существует стандартного способа передать эту информацию. Например, укажите, что двумерная графика в слое MECH1 используется для прорезки пазов.</p>
	<p>Настроив необходимые параметры, создайте файлы и просмотрите их в каталоге, указанном в поле <strong>Folder</strong>.</p>
	<center><strong>Ход работы:</strong></center>
	<p>Загрузите в ISIS файл с принципиальной схемой, изображенной на Рис. 132. Используя команду <strong>Netlist to ARES</strong>, передайте список соединений данной принципиальной схемы в ARES. Создайте границы печатной платы и расположите внутри них элементы, например, как показано на Рис. 165.</p>
	<center><img src="/images/lab3/pic10.png" alt=""></center>
	<center>Рис. 165</center>
	<p>Осуществите последовательность, приведенную в теоретических сведениях, необходимую для создания печатной платы. Реализуйте одно- и двухстороннюю разводку печатной платы. Сохраните созданную печатную плату на диск, так, чтобы название файла и путь к нему не содержал русских букв.</p>
	<p>Создайте печатную плату из принципиальной схемы, выбранной преподавателем в лабораторной работе №1.</p>
	<p>Оформите отчет о лабораторной работе согласно требованиям ЕСКД. В отчет должны входить тема и цель лабораторной работы, краткое описание процесса создания печатной платы из принципиальной схемы, выбранной преподавателем, разведенная печатная плата, вставленная в отчет в виде рисунка, выводы о проделанной работе.</p>
	<center><strong>Контрольные вопросы:</strong></center>
	<ol>
		<li>Опишите процесс создания границ печатной платы.</li>
		<li>Опишите процесс размещения компонентов.</li>
		<li>Опишите процесс создания и размещения монтажных отверстий.</li>
		<li>Для чего необходимы правила проектирования и классы цепей при создании печатной платы?</li>
		<li>Для чего используются запретные зоны при создании печатной платы?</li>
		<li>Какие способы разводки печатной платы можно использовать в ARES? В чем их отличие</li>
		<li>Опишите процесс создания области металлизации. Для чего используются области металлизации при создании печатных плат?</li>
	</ol>

</div>