# DXF импорт

<div style="text-align:justify;">
	<p>Процесс преобразования заключается в следующем:</p>
	<ul>
		<li>Создании DXF файла. Это должно быть, если возможно, двумерное изображение. ARES не может обрабатывать трехмерные данные и преобразователь игнорирует все z-координаты в DXF файле, таким образом, проецируя трехмерное изображение на двумерную плоскость.</li>
		<li>Определении слоев в DXF файле, которые объединяются и размещаются в определенных слоях ARES. Диалоговое окно импорта DXF файлов позволяет пользователю выбрать один или несколько слоев, где выбор определяет какие слои в DXF файле объединяются и размещаются на указанном ARES слое.</li>		
	</ul>
	<p>Программа импорта DXF файлов автоматически определяет правильные единицы измерения, если они указаны во входном файле.</p>
	<p>AutoCAD (приложение, которое создает файлы формата DXF) поддерживает намного более функций, чем предлагает ARES. Таким образом, некоторые объекты в DXF файле игнорируются DXFCVT преобразователем, а другие аппроксимируются. Однако, для изображения размеров простых корпусов и подобных целей внутри ARES, DXFCVT отлично выполняет свою задачу.</p>
	<p>Смотри раздел «Ограничения», который касается ограничений DXFCVT преобразователя.</p>
	<center><strong>Настройка</strong></center>
	<p>При использовании преобразователя встроенного в ARES DXF файл должен удовлетворять следующим требованиям:</p>
	<ul>
		<li>экспортируемый файл должен быть файлом в кодах ASCII, а не в альтернативном двоичном формате (DXB).</li>
		<li>координатами в DXF файле являются дюймы в формате с плавающей запятой, где значение 1.0000 обозначает один дюйм – стандарт для DXF файлов.</li>
	</ul>
	<center><strong>Присваивание слоев</strong></center>
	<p>Создав DXF файл, пользователь должен решить какие слои ему необходимы. Выбор слоев указывает преобразователю какие слои в DXF файле необходимо объединить и поместить на один слой ARES.</p>
	<p>Заметьте, что для конкретного преобразования, ARES слой может быть выбран только один раз. Попытка назначить слой дважды приведет к ошибке.</p>
	<center><strong>Осуществление преобразования</strong></center>
	<p>Чтобы осуществить преобразование, необходимо загрузить в преобразователь DXF файл. Этот процесс осуществляется неявно в ARES в том смысле, что сразу после выбора команды <strong>Import DXF…</strong>, программа запросит соответствующий DXF файл. Успешная загрузка DXF файла приведет к появлению диалогового окна DXF импорта (Рис. 4).</p>
	<center><strong>Ошибки при преобразовании</strong></center>
	<p>Преобразователь написан так, что отказоустойчив, насколько это возможно при чтении DXF файла. Ошибки анализа возникают только, когда:</p>
	<ol>
		<li>DXF файл не содержат раздел ENTITIES (Объекты). DXF файл без объектов считается пустым, что делает преобразование невозможным.</li>
		<li>DXF файл содержат раздел (например, HEADER (ЗАГОЛОВОК), ENTITIES (ОБЪЕКТЫ)) или примитив (например, LINE (ЛИНИЯ), CIRCLE (ОКРУЖНОСТЬ) и т. д.), которые не содержат ни одной записи. Все разделы должны как минимум содержать запись об окончании раздела, а все примитивы должны содержать хотя бы одну запись. Это означает, что DXF файл поврежден.</li>
		<li>DXF файл содержат раздел (например, HEADER (ЗАГОЛОВОК), ENTITIES (ОБЪЕКТЫ)) или примитив (например, LINE (ЛИНИЯ), CIRCLE (ОКРУЖНОСТЬ) и т. д.), которые не содержат ни одной записи. Все разделы должны как минимум содержать запись об окончании раздела, а все примитивы должны содержать хотя бы одну запись. Это означает, что DXF файл поврежден.</li>
		<li>Сбой при извлечении (анализе) данных такого типа, который не согласуется с групповым кодом записи. Например, записать с групповым кодом 10 подразумевает целое число, а запись с групповым кодов 41 подразумевает число с плавающей точкой. Ошибка генерируется, если (независимо от формата) значение не может быть проанализировано.</li>		
	</ol>
	<p>Когда возникает ошибка, преобразователь выводит ошибку вида:</p> <br>
	<p>ERROR   (000413): Entity Group Expected - EOF found?</p> <br>
	<p>и преобразование отменяется.</p>
	<p>При ошибке анализа файла, число последней считанной строки из DXF файла показано в скобках после слова ERROR (учтите, что преобразователь производит считывание группами по две строки из DXF файла в любой момент времени, поэтому любая ошибка может быть на указанной или предыдущей строке). Для ошибок не связанных с анализом файла, число строк изображается в виде прочерков.</p>
	<center><strong>Предупреждения при преобразовании</strong></center>
	<p>Кроме ошибок (описанных выше) другие возможные отчеты о необычном или возможно ошибочном преобразовании считаются предупреждениями. Предупреждения не критичны (они не останавливают операцию преобразования), но полезны, если в открывшемся файле отображается не то, что ожидалось. Преобразователь создает предупреждения, когда возникает ситуация, которая может привести к искажению изображения и включает любую запись, которую он считывает и не использует, если не может её преобразовать. Чтобы не замедлять преобразование (выводом текста) предупреждения отображаются только, если необходимо (если поставить флажок <strong>Generate Warnings?</strong> в диалоговом окне).</p>
	<p>Предупреждения отображаются подобно ошибкам (описанным выше), за исключением того, что номеру последней считанной строки и тексту с предупреждением предшествует слово WARNING.</p>
	<center><strong>DXF Ограничения</strong></center>
	<p>Основные ограничения DXFCVT преобразователя подытожены ниже:</p>
	<ul>
		<li>DXF файлы должны быть файлами в кодах ASCII. Преобразователь не поддерживает двоичный формат файлов DXB.</li>
		<li>Трехмерные DXF чертежи проецируются на двумерную плоскость (планарный вид) преобразователем, поскольку ARES поддерживает только двумерное изображение.</li>
		<li>Единственными поддерживаемыми объектами (отдельно или как часть объекта BLOCK) являются BLOCK, LINE, POLYLINE, CIRCLE, ARC, TEXT, SOLID, TRACE и INSERT. Все другие объекты игнорируются и не влияют на процесс преобразования файла. Объекты SOLID и TRACE преобразуются как многоугольники. В частности, не поддерживается объект DIMENSION.</li>
		<li>Преобразуются только те свойства объектов, которые поддерживаются в ARES. Таким образом, свойства текста, такие как тип шрифта, толщина и угол наклона курсива игнорируются и не влияют на преобразование файла.</li>
	</ul>
	<p>Другие второстепенные ограничения включают:</p>
		<ul>
			<li>Свойства линий (штриховая, пунктирная, толщина т. д.) теряются. Все линии преобразуются к стандартной толщине линии.</li>
			<li>Цвета линий теряются – все преобразуемые величины отображаются цветом, соответствующим слою ARES, на котором они находятся.</li>
			<li>Стили текста (из раздела DXF TABLES) игнорируются. Преобразователь основывается (для тех свойств, которое он преобразовывает, таких как поворот, отображение и т. д.) на тех свойствах, которые определены как часть объекта TEXT.</li>
			<li>Преобразование объектов TEXT изображенных с помощью пропорционального текстового стиля происходит в шрифт фиксированного размера в ARES так, что длина всей строки в ARES будет отличаться от общей длины строки в DXF чертеже. Это может привести к проблемам выравнивания. Поскольку примитив текста ARES ограничен только символами фиксированного размера, который позволяет определить высоту и ширину символа для текстовой строки, единственный способ борьбы с этой проблемой является изменение ширины символа так, чтобы число символов в строке, умноженное на измененную ширину символа было таким же, как общая длина строки в DXF файле. Однако, поскольку DXF файл не содержит общую длину строки – это не возможно сделать. На самом деле преобразователь вычисляет высоту символа как равную высоте объекта TEXT DXF, а ширину символа как равную высоте объекта TEXT, умноженному на коэффициент масштабирования по оси x этого объекта (последний по умолчанию равен 1.0).</li>
			<li>Следующие атрибуты и свойства текста не преобразуются:
				<ol>
					<li>	1.	Угол наклона (для курсивов).</li>
					<li>2.	Стили – все тексты изображаются векторными шрифтами с символами фиксированного размера.</li>
					<li>3.	Управляющие символы. Все такие символы в строке сохраняются.</li>
				</ol>
			</li>
			<li>Следующие атрибуты и свойства текста преобразуются:
				<ol>
					<li>Поворот.</li>
					<li>Отражение по оси X и Y.</li>
					<li>Выравнивание, за исключением атрибута «5» («Текст выравнивается между двумя точками»).</li>
				</ol>
			</li>
			<li>Преобразуются только следующие объекты:
				<ol>
					<li>Объекты LINE и 3DLINE.</li>
					<li>Объекты CIRCLE.</li>
					<li>Объекты ARC (по умолчанию линеаризацией множеством хорд).</li>
					<li>Объекты SOLID, TRACE и 3DFACE преобразуются в не закрашенные трех/четырех сторонние многоугольники. «Скрытые» атрибуты 3DFACE не поддерживаются.</li>
					<li>Атрибуты TEXT преобразуются как было описано выше.</li>
					<li>Объекты BLOCK.</li>
					<li>Объекты INSERT преобразуются, но любые связанные с ними объекты ATTRIB отбрасываются – это приводит к тому, что текст, определенный в объекте INSERT через объект ATTRIB теряется.</li>
					<li>Объекты POLYLINE и связанные с ними объекты VERTEX. Все многоугольники предполагаются непрерывными, а все объекты VERTEX предполагаются просто точками (т. е., не линиями Берье или сплайнами).</li>
				</ol>
			</li>
		</ul>
	<p>Кроме того, делается нескольких других упрощений:</p>
	<ol>
		<li>Объекты DIMENSION – они обычно также экспортируются как объекты LINE, SOLID и TEXT, поэтому не должно быть потери видимой информации.</li>
		<li>Объекты ATTRIB и ATTDEF теряются, как указано выше.</li>
		<li>Объекты SHAPE будут добавлены в последующих версиях.</li>
	</ol>
	<p>Все координаты DXF файла считаются приведенными в дюймах с неявным началом координат в точке (0,0). Пользователь может определить другие параметры масштабирования (через поле <strong>Scaling (multiplier)</strong> в диалоговом окне). Положительные углы измеряются в градусах против часовой стрелки от предполагаемой нулевой оси, которой соответствует положительная ось x.</p>
</div>